<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bollywood Simulator</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNiIgZmlsbD0iI0ZGRDcwMCIvPgo8cGF0aCBkPSJNMTYgOEw4IDI0SDE2TDI0IDhIMTZaIiBmaWxsPSIjMUExQTFBIi8+CjxjaXJjbGUgY3g9IjE2IiBjeT0iMTYiIHI9IjMiIGZpbGw9IiNGRkQ3MDAiLz4KPC9zdmc+" type="image/svg+xml">
    
    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffd700">
    
    <!-- External Libraries -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-animation">
            <i class="fas fa-film spinning"></i>
            <h2>Loading Bollywood Simulator...</h2>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-text">Building your cinema empire...</p>
        </div>
    </div>

    <!-- PWA Install Prompt -->
    <div id="install-prompt" class="install-prompt" style="display: none;">
        <div class="install-content">
            <i class="fas fa-mobile-alt"></i>
            <h3>Install Bollywood Simulator</h3>
            <p>Add to your home screen for the best experience!</p>
            <div class="install-buttons">
                <button id="install-app" class="install-btn primary">Install App</button>
                <button id="dismiss-install" class="install-btn secondary">Later</button>
            </div>
        </div>
    </div>

    <div id="game-container" class="game-container" style="display: none;">
        <!-- Game Start Modal -->
        <div id="game-start-modal" class="modal-overlay">
            <div class="start-modal">
                <div class="start-header">
                    <i class="fas fa-film"></i>
                    <h1>Bollywood Simulator</h1>
                    <p>Create Your Cinema Legacy!</p>
                </div>
                
                <div class="start-options">
                    <div class="money-selection">
                        <h3>Choose Your Starting Capital</h3>
                        <div class="budget-options budget-options-limited">
                            <label class="budget-option">
                                <input type="radio" name="starting-budget" value="50000000" checked>
                                <div class="option-card normal">
                                    <h4>üé¨ Producer</h4>
                                    <p>‚Çπ5 Crore</p>
                                    <small>Normal Mode</small>
                                </div>
                            </label>
                            <label class="budget-option">
                                <input type="radio" name="starting-budget" value="200000000">
                                <div class="option-card hard">
                                    <h4>üè¢ Studio Head</h4>
                                    <p>‚Çπ20 Crore</p>
                                    <small>Big Budget</small>
                                </div>
                            </label>
                            <label class="budget-option">
                                <input type="radio" name="starting-budget" value="1000000000">
                                <div class="option-card expert">
                                    <h4>üëë Media Mogul</h4>
                                    <p>‚Çπ100 Crore</p>
                                    <small>Unlimited Power</small>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div class="game-actions">
                        <button class="primary-btn" id="new-game-btn">
                            <i class="fas fa-play"></i>
                            New Game
                        </button>
                        <button class="secondary-btn" id="load-game-btn">
                            <i class="fas fa-folder-open"></i>
                            Load Game
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Header with Studio Logo Display -->
        <header class="game-header">
            <div class="logo">
                <!-- FIXED: Studio Logo Display -->
                <div class="studio-logo-display" id="header-studio-logo">
                    <i class="fas fa-film"></i>
                </div>
                <div class="studio-info">
                    <h1 id="header-studio-name">Bollywood Simulator</h1>
                    <span id="header-studio-tagline">Your Cinema Empire</span>
                </div>
            </div>
            
            <div class="time-controls">
                <div class="current-date">
                    <i class="fas fa-calendar"></i>
                    <span id="current-date">Week 1, Year 1</span>
                </div>
                <div class="time-buttons">
                    <button class="time-btn" id="advance-week">
                        <i class="fas fa-forward"></i>
                        +1 Week
                    </button>
                    <button class="time-btn" id="advance-month">
                        <i class="fas fa-fast-forward"></i>
                        +1 Month
                    </button>
                </div>
            </div>
            
            <div class="player-stats">
                <div class="stat-item money-stat" id="money-container">
                    <i class="fas fa-rupee-sign"></i>
                    <span id="money">‚Çπ0</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-star"></i>
                    <span id="reputation">10</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-building"></i>
                    <span id="studio-level">Level 1</span>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-navigation">
            <button class="tab-btn active" data-tab="profile">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </button>
            <button class="tab-btn" data-tab="studio">
                <i class="fas fa-building"></i>
                <span>Studio</span>
            </button>
            <button class="tab-btn" data-tab="scripts">
                <i class="fas fa-scroll"></i>
                <span>Scripts</span>
            </button>
            <button class="tab-btn" data-tab="casting">
                <i class="fas fa-users"></i>
                <span>Casting</span>
            </button>
            <button class="tab-btn" data-tab="production">
                <i class="fas fa-video"></i>
                <span>Production</span>
            </button>
            <button class="tab-btn" data-tab="marketing">
                <i class="fas fa-bullhorn"></i>
                <span>Marketing</span>
            </button>
            <button class="tab-btn" data-tab="boxoffice">
                <i class="fas fa-ticket-alt"></i>
                <span>Box Office</span>
            </button>
            <button class="tab-btn" data-tab="market">
                <i class="fas fa-chart-bar"></i>
                <span>Market</span>
            </button>
            <button class="tab-btn" data-tab="finances">
                <i class="fas fa-chart-line"></i>
                <span>Finances</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Profile Tab -->
            <div class="tab-content active" id="profile-tab">
                <div class="profile-section">
                    <h2>Create Your Producer Profile</h2>
                    <div class="character-creation">
                        <div class="avatar-selection">
                            <h3>Choose Your Avatar</h3>
                            <div class="avatar-grid" id="avatar-grid">
                                <!-- Real faces generated dynamically -->
                            </div>
                        </div>
                        
                        <div class="name-input">
                            <h3>Your Name</h3>
                            <input type="text" id="character-name" placeholder="Enter your producer name" maxlength="25">
                        </div>
                        
                        <div class="studio-section">
                            <h3>Production House Name</h3>
                            <input type="text" id="studio-name" placeholder="Enter production house name" maxlength="40">
                        </div>
                        
                        <!-- ENHANCED: Real Production House Style Logos -->
                        <div class="logo-selection">
                            <h3>Choose Production House Style</h3>
                            <div class="real-production-logos" id="production-logo-grid">
                                <!-- Real production house style logos -->
                            </div>
                            <p class="logo-note">Select a professional logo style, then customize with your studio name</p>
                        </div>
                        
                        <button class="primary-btn" id="start-game">
                            <i class="fas fa-rocket"></i>
                            Launch Your Studio
                        </button>
                    </div>
                </div>
            </div>

            <!-- Scripts Tab with Back Navigation -->
            <div class="tab-content" id="scripts-tab">
                <div class="scripts-section">
                    <h2>üé¨ Script Development</h2>
                    
                    <!-- FIXED: Navigation with Back Button -->
                    <div class="script-navigation">
                        <button class="back-btn" id="script-back-btn" style="display: none;">
                            <i class="fas fa-arrow-left"></i>
                            Back
                        </button>
                        <div class="step-indicator">
                            <div class="step active" data-step="1">
                                <span class="step-number">1</span>
                                <span class="step-title">Movie Details</span>
                            </div>
                            <div class="step" data-step="2">
                                <span class="step-number">2</span>
                                <span class="step-title">Genre & Budget</span>
                            </div>
                            <div class="step" data-step="3">
                                <span class="step-number">3</span>
                                <span class="step-title">Script Quality</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="script-creation-process">
                        <div class="script-step active" id="step-1">
                            <h3>Step 1: Movie Details</h3>
                            <div class="movie-details-form">
                                <div class="form-group">
                                    <label for="movie-title">üé≠ Movie Title</label>
                                    <input type="text" id="movie-title" placeholder="Enter your movie title" maxlength="50">
                                </div>

                                <div class="form-group">
                                    <label for="lead-roles-count">üë• Number of Lead Roles</label>
                                    <select id="lead-roles-count">
                                        <option value="1" selected>1 Lead Role</option>
                                        <option value="2">2 Lead Roles</option>
                                        <option value="3">3 Lead Roles</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="supporting-roles-count">üé≠ Number of Supporting Roles</label>
                                    <select id="supporting-roles-count">
                                        <option value="1" selected>1 Supporting Role</option>
                                        <option value="2">2 Supporting Roles</option>
                                        <option value="3">3 Supporting Roles</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="is-franchise"> 
                                        Is this part of a franchise?
                                    </label>
                                </div>

                                <div class="form-group franchise-selection" id="franchise-options" style="display: none;">
                                    <label for="franchise-name-input">üèÜ Franchise Name</label>
                                    <div class="franchise-input-container">
                                        <input type="text" id="franchise-name-input" placeholder="Enter franchise name..." maxlength="30">
                                        <div class="franchise-dropdown" id="franchise-dropdown" style="display: none;">
                                            <!-- Existing franchises will be populated here -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="movie-format">üé• Cinema Format</label>
                                    <div class="format-options">
                                        <label class="format-option">
                                            <input type="radio" name="format" value="2d" checked>
                                            <div class="format-card">
                                                <h4>2D Standard</h4>
                                                <p>Cost: +‚Çπ0</p>
                                            </div>
                                        </label>
                                        <label class="format-option">
                                            <input type="radio" name="format" value="3d">
                                            <div class="format-card">
                                                <h4>3D Experience</h4>
                                                <p>Cost: +‚Çπ2 Cr</p>
                                            </div>
                                        </label>
                                        <label class="format-option">
                                            <input type="radio" name="format" value="imax">
                                            <div class="format-card">
                                                <h4>IMAX Premium</h4>
                                                <p>Cost: +‚Çπ5 Cr</p>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                
                                <button class="next-step-btn" onclick="nextStep(2)">Next Step ‚Üí</button>
                            </div>
                        </div>
                        
                        <div class="script-step" id="step-2">
                            <h3>Step 2: Genre Selection</h3>
                            <div class="enhanced-genre-grid" id="enhanced-genre-grid">
                                <!-- Enhanced genres -->
                            </div>
                            <button class="next-step-btn" onclick="nextStep(3)">Next Step ‚Üí</button>
                        </div>
                        
                        <div class="script-step" id="step-3">
                            <h3>Step 3: Script Development Timeline</h3>
                            <div class="timeline-options">
                                <div class="timeline-card" data-timeline="rush">
                                    <h4>‚ö° Rush Script</h4>
                                    <p><strong>Duration:</strong> 2 weeks</p>
                                    <p><strong>Quality:</strong> 50-60%</p>
                                    <p><strong>Cost:</strong> ‚Çπ15 Lakhs</p>
                                    <input type="radio" name="script-timeline" value="rush">
                                </div>
                                <div class="timeline-card recommended" data-timeline="standard">
                                    <h4>üìù Standard Script</h4>
                                    <p><strong>Duration:</strong> 4 weeks</p>
                                    <p><strong>Quality:</strong> 70-80%</p>
                                    <p><strong>Cost:</strong> ‚Çπ30 Lakhs</p>
                                    <input type="radio" name="script-timeline" value="standard" checked>
                                </div>
                                <div class="timeline-card" data-timeline="premium">
                                    <h4>‚ú® Premium Script</h4>
                                    <p><strong>Duration:</strong> 6 weeks</p>
                                    <p><strong>Quality:</strong> 85-95%</p>
                                    <p><strong>Cost:</strong> ‚Çπ50 Lakhs</p>
                                    <input type="radio" name="script-timeline" value="premium">
                                </div>
                            </div>
                            <button class="primary-btn" id="create-script-final">
                                <i class="fas fa-pen"></i>
                                Start Script Development
                            </button>
                        </div>
                    </div>
                    
                    <!-- Active Scripts Progress -->
                    <div class="active-scripts" id="active-scripts" style="display: none;">
                        <h3>üìã Scripts in Development</h3>
                        <div id="script-progress-list"></div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Casting Tab with Negotiation -->
            <div class="tab-content" id="casting-tab">
                <div class="casting-section">
                    <h2>‚≠ê Cast & Crew Selection</h2>
                    
                    <div class="cast-assignment-panel">
                        <div class="assignment-controls">
                            <div class="control-group">
                                <label for="movie-selector">üìΩÔ∏è Select Movie:</label>
                                <select id="movie-selector">
                                    <option value="">-- Select a movie to cast --</option>
                                </select>
                            </div>
                            
                            <div class="control-group">
                                <label for="role-type-selector">üé≠ Role Type:</label>
                                <select id="role-type-selector">
                                    <option value="lead">Lead Role</option>
                                    <option value="supporting">Supporting Role</option>
                                    <option value="director">Director</option>
                                    <option value="music">Music Director</option>
                                    <option value="singer">Playback Singer</option>
                                </select>
                            </div>

                            <div class="control-group">
                                <label for="role-number-selector">üî¢ Role Number:</label>
                                <select id="role-number-selector">
                                    <option value="1">Role 1</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="assignment-status" id="assignment-status">
                            <p>Select a movie and role type to start casting</p>
                        </div>
                    </div>

                    <div class="casting-requirements" id="casting-requirements" style="display: none;">
                        <h3>üìã Current Movie Requirements</h3>
                        <div class="requirements-grid" id="requirements-grid"></div>
                    </div>
                    
                    <div class="celebrity-categories">
                        <div class="category-tabs">
                            <button class="cat-tab active" data-category="actors">
                                <i class="fas fa-user-friends"></i>
                                Actors & Actresses
                            </button>
                            <button class="cat-tab" data-category="directors">
                                <i class="fas fa-video"></i>
                                Directors
                            </button>
                            <button class="cat-tab" data-category="music">
                                <i class="fas fa-music"></i>
                                Music Directors
                            </button>
                            <button class="cat-tab" data-category="singers">
                                <i class="fas fa-microphone"></i>
                                Playback Singers
                            </button>
                        </div>
                        
                        <div class="celebrity-showcase" id="celebrity-showcase"></div>
                    </div>

                    <div class="hired-cast-section">
                        <h3>‚úÖ Hired Cast & Crew</h3>
                        <div class="hired-cast-table-container">
                            <table class="hired-cast-table">
                                <thead>
                                    <tr>
                                        <th>Movie</th>
                                        <th>Role</th>
                                        <th>Celebrity</th>
                                        <th>Fee/Deal</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="hired-cast-table-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Production Tab -->
            <div class="tab-content" id="production-tab">
                <div class="production-section">
                    <h2>üé¨ Movie Production Pipeline</h2>
                    
                    <div class="production-overview" id="production-overview">
                        <div class="current-project-card">
                            <h3>üé≠ Current Projects Status</h3>
                            <div id="current-projects-list">
                                <p class="no-project">No active projects. Cast your movies to begin production!</p>
                            </div>
                        </div>
                        
                        <div class="production-actions" id="production-actions" style="display: none;">
                            <button class="production-btn" id="start-production-btn">
                                <i class="fas fa-play"></i>
                                Start Production
                            </button>
                            <button class="production-btn" id="fast-track-btn">
                                <i class="fas fa-fast-forward"></i>
                                Fast Track (+50% Cost)
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Competition Tab - NEW -->
            <div class="tab-content" id="market-tab">
                <div class="market-section">
                    <h2>üìà Market Competition & Release Schedule</h2>
                    
                    <div class="market-overview">
                        <div class="competitor-studios">
                            <h3>üè¢ Competitor Studios</h3>
                            <div class="competitors-grid" id="competitors-grid">
                                <!-- Competitor studios populated dynamically -->
                            </div>
                        </div>
                        
                        <div class="release-schedule">
                            <h3>üìÖ Upcoming Releases</h3>
                            <div class="schedule-container">
                                <div class="schedule-filters">
                                    <select id="month-filter">
                                        <option value="">All Months</option>
                                        <option value="1">January</option>
                                        <option value="2">February</option>
                                        <option value="3">March</option>
                                        <option value="4">April</option>
                                        <option value="5">May</option>
                                        <option value="6">June</option>
                                        <option value="7">July</option>
                                        <option value="8">August</option>
                                        <option value="9">September</option>
                                        <option value="10">October</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </div>
                                <div class="release-timeline" id="release-timeline">
                                    <!-- Release schedule populated dynamically -->
                                </div>
                            </div>
                        </div>
                        
                        <div class="market-analysis">
                            <h3>üìä Market Analysis</h3>
                            <div class="analysis-grid">
                                <div class="analysis-card">
                                    <h4>Market Share</h4>
                                    <div class="market-share-display">
                                        <div class="share-item">
                                            <span class="studio-name" id="player-studio-name">Your Studio</span>
                                            <div class="share-bar">
                                                <div class="share-fill" id="player-share" style="width: 0%"></div>
                                            </div>
                                            <span class="share-percent" id="player-share-text">0%</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Box Office Tab with Theatre Chain Logos -->
            <div class="tab-content" id="boxoffice-tab">
                <div class="boxoffice-section">
                    <h2>üé´ Box Office Performance</h2>
                    
                    <div class="theatre-chains">
                        <h3>üè¢ Theatre Chain Partners</h3>
                        <div class="chains-grid" id="chains-grid">
                            <!-- FIXED: Theatre chain logos will be populated -->
                        </div>
                    </div>
                    
                    <div class="collection-dashboard">
                        <div class="main-collection-card">
                            <h3>üí∞ Total Box Office Collection</h3>
                            <div class="collection-display">
                                <span class="currency">‚Çπ</span>
                                <span class="amount" id="total-collection">0</span>
                                <span class="unit">Crores</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Finances Tab -->
            <div class="tab-content" id="finances-tab">
                <div class="finances-section">
                    <h2>üíº Financial Management</h2>
                    
                    <div class="money-management">
                        <div class="balance-card">
                            <h3>Current Balance</h3>
                            <p class="balance-amount" id="current-balance">‚Çπ0</p>
                        </div>
                        
                        <div class="developer-panel">
                            <h3>üîß Developer Console</h3>
                            <div class="cheat-interface">
                                <div class="promo-input">
                                    <input type="text" id="promo-code-input" placeholder="Enter developer code..." maxlength="20">
                                    <button id="apply-promo-code">Execute</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Negotiation Modal - NEW FEATURE -->
    <div class="modal-overlay" id="negotiation-modal" style="display: none;">
        <div class="negotiation-panel">
            <div class="negotiation-header">
                <h3>ü§ù Negotiate Deal</h3>
                <button class="close-btn" id="close-negotiation">‚úï</button>
            </div>
            
            <div class="celebrity-profile">
                <img id="negotiate-celebrity-photo" src="" alt="Celebrity">
                <div class="celebrity-details">
                    <h4 id="negotiate-celebrity-name">Celebrity Name</h4>
                    <p id="negotiate-celebrity-role">Role: Lead Actor</p>
                    <p class="asking-price">Asking Price: <span id="negotiate-asking-price">‚Çπ5 Cr</span></p>
                </div>
            </div>
            
            <div class="negotiation-options">
                <div class="deal-tabs">
                    <button class="deal-tab active" data-deal="fixed">Fixed Fee</button>
                    <button class="deal-tab" data-deal="percentage">Box Office %</button>
                    <button class="deal-tab" data-deal="hybrid">Hybrid Deal</button>
                </div>
                
                <div class="deal-content active" id="fixed-deal">
                    <h4>üí∞ Fixed Fee Deal</h4>
                    <div class="offer-slider">
                        <label>Your Offer: <span id="fixed-offer-amount">‚Çπ2.5 Cr</span></label>
                        <input type="range" id="fixed-offer" min="0" max="100" value="50">
                        <div class="slider-labels">
                            <span>50%</span>
                            <span>100%</span>
                        </div>
                    </div>
                </div>
                
                <div class="deal-content" id="percentage-deal">
                    <h4>üìä Box Office Percentage</h4>
                    <div class="offer-slider">
                        <label>Percentage Share: <span id="percentage-offer">5%</span></label>
                        <input type="range" id="percentage-slider" min="1" max="20" value="5">
                        <div class="slider-labels">
                            <span>1%</span>
                            <span>20%</span>
                        </div>
                    </div>
                </div>
                
                <div class="deal-content" id="hybrid-deal">
                    <h4>üéØ Hybrid Deal</h4>
                    <div class="offer-slider">
                        <label>Base Fee: <span id="hybrid-base-amount">‚Çπ1 Cr</span></label>
                        <input type="range" id="hybrid-base" min="0" max="50" value="20">
                    </div>
                    <div class="offer-slider">
                        <label>+ Box Office Share: <span id="hybrid-percentage">3%</span></label>
                        <input type="range" id="hybrid-percent" min="1" max="10" value="3">
                    </div>
                </div>
            </div>
            
            <div class="negotiation-result" id="negotiation-result">
                <p>Success Chance: <span id="success-chance">75%</span></p>
                <div class="chance-bar">
                    <div class="chance-fill" id="chance-fill" style="width: 75%"></div>
                </div>
            </div>
            
            <div class="negotiation-actions">
                <button class="negotiate-btn" id="make-offer">Make Offer</button>
                <button class="negotiate-btn secondary" id="cancel-negotiation">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Enhanced Notification Modal -->
    <div class="modal-overlay" id="notification-modal" style="display: none;">
        <div class="enhanced-notification">
            <div class="notification-icon-container">
                <i class="notification-icon"></i>
            </div>
            <h3 class="notification-title"></h3>
            <p class="notification-message"></p>
            <button class="notification-confirm">Understood</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
